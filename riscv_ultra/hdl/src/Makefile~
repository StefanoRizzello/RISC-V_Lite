# -*- Makefile -*-
### Makefile - VHDL Makefile generated by Emacs VHDL Mode 3.38.1

# Project   : riscv-local
# Platform  : ModelSim
# Generated : 2022-01-25 10:51:52 stefano


# Define compilation command and options

COMPILE = vcom
OPTIONS = -93 -work work


# Define library paths

LIBRARY-work = work


# Define library unit files

UNIT-work-add_sub = \
	$(LIBRARY-work)/add_sub/_primary.dat
UNIT-work-add_sub-str = \
	$(LIBRARY-work)/add_sub/str.dat
UNIT-work-alu = \
	$(LIBRARY-work)/alu/_primary.dat
UNIT-work-alu-str = \
	$(LIBRARY-work)/alu/str.dat
UNIT-work-alu_control = \
	$(LIBRARY-work)/alu_control/_primary.dat
UNIT-work-alu_control-str = \
	$(LIBRARY-work)/alu_control/str.dat
UNIT-work-barrel_shifter = \
	$(LIBRARY-work)/barrel_shifter/_primary.dat
UNIT-work-barrel_shifter-str = \
	$(LIBRARY-work)/barrel_shifter/str.dat
UNIT-work-control = \
	$(LIBRARY-work)/control/_primary.dat
UNIT-work-control-str = \
	$(LIBRARY-work)/control/str.dat
UNIT-work-dec_5to32 = \
	$(LIBRARY-work)/dec_5to32/_primary.dat
UNIT-work-dec_5to32-arch = \
	$(LIBRARY-work)/dec_5to32/arch.dat
UNIT-work-decode_stage = \
	$(LIBRARY-work)/decode_stage/_primary.dat
UNIT-work-decode_stage-str = \
	$(LIBRARY-work)/decode_stage/str.dat
UNIT-work-decode_stage_control = \
	$(LIBRARY-work)/decode_stage_control/_primary.dat
UNIT-work-decode_stage_control-str = \
	$(LIBRARY-work)/decode_stage_control/str.dat
UNIT-work-execute_stage = \
	$(LIBRARY-work)/execute_stage/_primary.dat
UNIT-work-execute_stage-str = \
	$(LIBRARY-work)/execute_stage/str.dat
UNIT-work-execute_stage_control = \
	$(LIBRARY-work)/execute_stage_control/_primary.dat
UNIT-work-execute_stage_control-str = \
	$(LIBRARY-work)/execute_stage_control/str.dat
UNIT-work-fetch_stage = \
	$(LIBRARY-work)/fetch_stage/_primary.dat
UNIT-work-fetch_stage-str = \
	$(LIBRARY-work)/fetch_stage/str.dat
UNIT-work-fetch_stage_tb = \
	$(LIBRARY-work)/fetch_stage_tb/_primary.dat
UNIT-work-fetch_stage_tb-arch = \
	$(LIBRARY-work)/fetch_stage_tb/arch.dat
UNIT-work-fetch_stage_tb_arch_cfg = \
	$(LIBRARY-work)/fetch_stage_tb_arch_cfg/_primary.dat
UNIT-work-immediate_generator = \
	$(LIBRARY-work)/immediate_generator/_primary.dat
UNIT-work-immediate_generator-str = \
	$(LIBRARY-work)/immediate_generator/str.dat
UNIT-work-mem_stage = \
	$(LIBRARY-work)/mem_stage/_primary.dat
UNIT-work-mem_stage-str = \
	$(LIBRARY-work)/mem_stage/str.dat
UNIT-work-mem_stage_control = \
	$(LIBRARY-work)/mem_stage_control/_primary.dat
UNIT-work-mem_stage_control-str = \
	$(LIBRARY-work)/mem_stage_control/str.dat
UNIT-work-mux_2to1 = \
	$(LIBRARY-work)/mux_2to1/_primary.dat
UNIT-work-mux_2to1-arch = \
	$(LIBRARY-work)/mux_2to1/arch.dat
UNIT-work-mux_2to1_bit = \
	$(LIBRARY-work)/mux_2to1_bit/_primary.dat
UNIT-work-mux_2to1_bit-str = \
	$(LIBRARY-work)/mux_2to1_bit/str.dat
UNIT-work-mux_32to1 = \
	$(LIBRARY-work)/mux_32to1/_primary.dat
UNIT-work-mux_32to1-arch = \
	$(LIBRARY-work)/mux_32to1/arch.dat
UNIT-work-mux_4to1 = \
	$(LIBRARY-work)/mux_4to1/_primary.dat
UNIT-work-mux_4to1-str = \
	$(LIBRARY-work)/mux_4to1/str.dat
UNIT-work-param_pkg = \
	$(LIBRARY-work)/param_pkg/_primary.dat
UNIT-work-ram = \
	$(LIBRARY-work)/ram/_primary.dat
UNIT-work-ram-rtl = \
	$(LIBRARY-work)/ram/rtl.dat
UNIT-work-reg = \
	$(LIBRARY-work)/reg/_primary.dat
UNIT-work-reg-arch = \
	$(LIBRARY-work)/reg/arch.dat
UNIT-work-reg_file = \
	$(LIBRARY-work)/reg_file/_primary.dat
UNIT-work-reg_file-arch = \
	$(LIBRARY-work)/reg_file/arch.dat
UNIT-work-rv32i = \
	$(LIBRARY-work)/rv32i/_primary.dat
UNIT-work-rv32i-str = \
	$(LIBRARY-work)/rv32i/str.dat
UNIT-work-rv32i_control = \
	$(LIBRARY-work)/rv32i_control/_primary.dat
UNIT-work-rv32i_control-str = \
	$(LIBRARY-work)/rv32i_control/str.dat
UNIT-work-unary_and = \
	$(LIBRARY-work)/unary_and/_primary.dat
UNIT-work-unary_and-str = \
	$(LIBRARY-work)/unary_and/str.dat
UNIT-work-wb_stage = \
	$(LIBRARY-work)/wb_stage/_primary.dat
UNIT-work-wb_stage-str = \
	$(LIBRARY-work)/wb_stage/str.dat


# Define list of all library unit files

ALL_UNITS = \
	$(UNIT-work-add_sub) \
	$(UNIT-work-add_sub-str) \
	$(UNIT-work-alu) \
	$(UNIT-work-alu-str) \
	$(UNIT-work-alu_control) \
	$(UNIT-work-alu_control-str) \
	$(UNIT-work-barrel_shifter) \
	$(UNIT-work-barrel_shifter-str) \
	$(UNIT-work-control) \
	$(UNIT-work-control-str) \
	$(UNIT-work-dec_5to32) \
	$(UNIT-work-dec_5to32-arch) \
	$(UNIT-work-decode_stage) \
	$(UNIT-work-decode_stage-str) \
	$(UNIT-work-decode_stage_control) \
	$(UNIT-work-decode_stage_control-str) \
	$(UNIT-work-execute_stage) \
	$(UNIT-work-execute_stage-str) \
	$(UNIT-work-execute_stage_control) \
	$(UNIT-work-execute_stage_control-str) \
	$(UNIT-work-fetch_stage) \
	$(UNIT-work-fetch_stage-str) \
	$(UNIT-work-fetch_stage_tb) \
	$(UNIT-work-fetch_stage_tb-arch) \
	$(UNIT-work-fetch_stage_tb_arch_cfg) \
	$(UNIT-work-immediate_generator) \
	$(UNIT-work-immediate_generator-str) \
	$(UNIT-work-mem_stage) \
	$(UNIT-work-mem_stage-str) \
	$(UNIT-work-mem_stage_control) \
	$(UNIT-work-mem_stage_control-str) \
	$(UNIT-work-mux_2to1) \
	$(UNIT-work-mux_2to1-arch) \
	$(UNIT-work-mux_2to1_bit) \
	$(UNIT-work-mux_2to1_bit-str) \
	$(UNIT-work-mux_32to1) \
	$(UNIT-work-mux_32to1-arch) \
	$(UNIT-work-mux_4to1) \
	$(UNIT-work-mux_4to1-str) \
	$(UNIT-work-param_pkg) \
	$(UNIT-work-ram) \
	$(UNIT-work-ram-rtl) \
	$(UNIT-work-reg) \
	$(UNIT-work-reg-arch) \
	$(UNIT-work-reg_file) \
	$(UNIT-work-reg_file-arch) \
	$(UNIT-work-rv32i) \
	$(UNIT-work-rv32i-str) \
	$(UNIT-work-rv32i_control) \
	$(UNIT-work-rv32i_control-str) \
	$(UNIT-work-unary_and) \
	$(UNIT-work-unary_and-str) \
	$(UNIT-work-wb_stage) \
	$(UNIT-work-wb_stage-str)



# Rule for compiling entire design

all : \
		library \
		$(ALL_UNITS)


# Rule for cleaning entire design

clean : 
	-rm -f $(ALL_UNITS)


# Rule for creating library directory

library : \
		$(LIBRARY-work)

$(LIBRARY-work) :
	vlib $(LIBRARY-work); vmap work $(LIBRARY-work)


.PHONY : all clean library


# Rules for compiling single library units and their subhierarchy

add_sub : \
		library \
		$(UNIT-work-add_sub) \
		$(UNIT-work-add_sub-str)

alu : \
		library \
		add_sub \
		barrel_shifter \
		unary_and \
		$(UNIT-work-alu) \
		$(UNIT-work-alu-str)

alu_control : \
		library \
		$(UNIT-work-alu_control) \
		$(UNIT-work-alu_control-str)

barrel_shifter : \
		library \
		mux_2to1_bit \
		$(UNIT-work-barrel_shifter) \
		$(UNIT-work-barrel_shifter-str)

control : \
		library \
		$(UNIT-work-control) \
		$(UNIT-work-control-str)

dec_5to32 : \
		library \
		$(UNIT-work-dec_5to32) \
		$(UNIT-work-dec_5to32-arch)

decode_stage : \
		library \
		immediate_generator \
		reg_file \
		$(UNIT-work-decode_stage) \
		$(UNIT-work-decode_stage-str)

decode_stage_control : \
		library \
		control \
		$(UNIT-work-decode_stage_control) \
		$(UNIT-work-decode_stage_control-str)

execute_stage : \
		library \
		alu \
		mux_2to1 \
		$(UNIT-work-execute_stage) \
		$(UNIT-work-execute_stage-str)

execute_stage_control : \
		library \
		alu_control \
		$(UNIT-work-execute_stage_control) \
		$(UNIT-work-execute_stage_control-str)

fetch_stage : \
		library \
		mux_2to1 \
		reg \
		$(UNIT-work-fetch_stage) \
		$(UNIT-work-fetch_stage-str)

fetch_stage_tb : \
		library \
		fetch_stage \
		$(UNIT-work-fetch_stage_tb) \
		$(UNIT-work-fetch_stage_tb-arch)

fetch_stage_tb_arch_cfg : \
		library \
		fetch_stage_tb \
		$(UNIT-work-fetch_stage_tb_arch_cfg)

immediate_generator : \
		library \
		$(UNIT-work-immediate_generator) \
		$(UNIT-work-immediate_generator-str)

mem_stage : \
		library \
		$(UNIT-work-mem_stage) \
		$(UNIT-work-mem_stage-str)

mem_stage_control : \
		library \
		$(UNIT-work-mem_stage_control) \
		$(UNIT-work-mem_stage_control-str)

mux_2to1 : \
		library \
		$(UNIT-work-mux_2to1) \
		$(UNIT-work-mux_2to1-arch)

mux_2to1_bit : \
		library \
		$(UNIT-work-mux_2to1_bit) \
		$(UNIT-work-mux_2to1_bit-str)

mux_32to1 : \
		library \
		param_pkg \
		$(UNIT-work-mux_32to1) \
		$(UNIT-work-mux_32to1-arch)

mux_4to1 : \
		library \
		$(UNIT-work-mux_4to1) \
		$(UNIT-work-mux_4to1-str)

param_pkg : \
		library \
		$(UNIT-work-param_pkg)

ram : \
		library \
		$(UNIT-work-ram) \
		$(UNIT-work-ram-rtl)

reg : \
		library \
		$(UNIT-work-reg) \
		$(UNIT-work-reg-arch)

reg_file : \
		library \
		dec_5to32 \
		mux_32to1 \
		param_pkg \
		reg \
		$(UNIT-work-reg_file) \
		$(UNIT-work-reg_file-arch)

rv32i \
RV32I : \
		library \
		decode_stage \
		execute_stage \
		fetch_stage \
		mem_stage \
		rv32i_control \
		wb_stage \
		$(UNIT-work-rv32i) \
		$(UNIT-work-rv32i-str)

rv32i_control \
RV32I_control : \
		library \
		decode_stage_control \
		execute_stage_control \
		mem_stage_control \
		$(UNIT-work-rv32i_control) \
		$(UNIT-work-rv32i_control-str)

unary_and \
unary_AND : \
		library \
		$(UNIT-work-unary_and) \
		$(UNIT-work-unary_and-str)

wb_stage : \
		library \
		mux_4to1 \
		$(UNIT-work-wb_stage) \
		$(UNIT-work-wb_stage-str)


# Rules for compiling single library unit files

$(UNIT-work-add_sub) \
$(UNIT-work-add_sub-str) : \
		add_sub.vhd
	$(COMPILE) $(OPTIONS) add_sub.vhd

$(UNIT-work-alu) \
$(UNIT-work-alu-str) : \
		alu.vhd \
		$(UNIT-work-add_sub) \
		$(UNIT-work-barrel_shifter) \
		$(UNIT-work-unary_and)
	$(COMPILE) $(OPTIONS) alu.vhd

$(UNIT-work-alu_control) \
$(UNIT-work-alu_control-str) : \
		alu_control.vhd
	$(COMPILE) $(OPTIONS) alu_control.vhd

$(UNIT-work-barrel_shifter) \
$(UNIT-work-barrel_shifter-str) : \
		barrel_shifter.vhd \
		$(UNIT-work-mux_2to1_bit)
	$(COMPILE) $(OPTIONS) barrel_shifter.vhd

$(UNIT-work-control) \
$(UNIT-work-control-str) : \
		control.vhd
	$(COMPILE) $(OPTIONS) control.vhd

$(UNIT-work-dec_5to32) \
$(UNIT-work-dec_5to32-arch) : \
		dec_5to32.vhd
	$(COMPILE) $(OPTIONS) dec_5to32.vhd

$(UNIT-work-decode_stage) \
$(UNIT-work-decode_stage-str) : \
		decode_stage.vhd \
		$(UNIT-work-immediate_generator) \
		$(UNIT-work-reg_file)
	$(COMPILE) $(OPTIONS) decode_stage.vhd

$(UNIT-work-decode_stage_control) \
$(UNIT-work-decode_stage_control-str) : \
		decode_stage_control.vhd \
		$(UNIT-work-control)
	$(COMPILE) $(OPTIONS) decode_stage_control.vhd

$(UNIT-work-execute_stage) \
$(UNIT-work-execute_stage-str) : \
		execute_stage.vhd \
		$(UNIT-work-alu) \
		$(UNIT-work-mux_2to1)
	$(COMPILE) $(OPTIONS) execute_stage.vhd

$(UNIT-work-execute_stage_control) \
$(UNIT-work-execute_stage_control-str) : \
		execute_stage_control.vhd \
		$(UNIT-work-alu_control)
	$(COMPILE) $(OPTIONS) execute_stage_control.vhd

$(UNIT-work-fetch_stage) \
$(UNIT-work-fetch_stage-str) : \
		fetch_stage.vhd \
		$(UNIT-work-mux_2to1) \
		$(UNIT-work-reg)
	$(COMPILE) $(OPTIONS) fetch_stage.vhd

$(UNIT-work-fetch_stage_tb) \
$(UNIT-work-fetch_stage_tb-arch) \
$(UNIT-work-fetch_stage_tb_arch_cfg) : \
		fetch_stage_tb.vhd \
		$(UNIT-work-fetch_stage)
	$(COMPILE) $(OPTIONS) fetch_stage_tb.vhd

$(UNIT-work-immediate_generator) \
$(UNIT-work-immediate_generator-str) : \
		immediate_generator.vhd
	$(COMPILE) $(OPTIONS) immediate_generator.vhd

$(UNIT-work-mem_stage) \
$(UNIT-work-mem_stage-str) : \
		mem_stage.vhd
	$(COMPILE) $(OPTIONS) mem_stage.vhd

$(UNIT-work-mem_stage_control) \
$(UNIT-work-mem_stage_control-str) : \
		mem_stage_control.vhd
	$(COMPILE) $(OPTIONS) mem_stage_control.vhd

$(UNIT-work-mux_2to1) \
$(UNIT-work-mux_2to1-arch) : \
		mux_2to1.vhd
	$(COMPILE) $(OPTIONS) mux_2to1.vhd

$(UNIT-work-mux_2to1_bit) \
$(UNIT-work-mux_2to1_bit-str) : \
		mux_2to1_bit.vhd
	$(COMPILE) $(OPTIONS) mux_2to1_bit.vhd

$(UNIT-work-mux_32to1) \
$(UNIT-work-mux_32to1-arch) : \
		mux_32to1.vhd \
		$(UNIT-work-param_pkg)
	$(COMPILE) $(OPTIONS) mux_32to1.vhd

$(UNIT-work-mux_4to1) \
$(UNIT-work-mux_4to1-str) : \
		mux_4to1.vhd
	$(COMPILE) $(OPTIONS) mux_4to1.vhd

$(UNIT-work-param_pkg) : \
		param_pkg.vhd
	$(COMPILE) $(OPTIONS) param_pkg.vhd

$(UNIT-work-ram) \
$(UNIT-work-ram-rtl) : \
		ram.vhd
	$(COMPILE) $(OPTIONS) ram.vhd

$(UNIT-work-reg) \
$(UNIT-work-reg-arch) : \
		reg.vhd
	$(COMPILE) $(OPTIONS) reg.vhd

$(UNIT-work-reg_file) \
$(UNIT-work-reg_file-arch) : \
		reg_file.vhd \
		$(UNIT-work-dec_5to32) \
		$(UNIT-work-mux_32to1) \
		$(UNIT-work-param_pkg) \
		$(UNIT-work-reg)
	$(COMPILE) $(OPTIONS) reg_file.vhd

$(UNIT-work-rv32i) \
$(UNIT-work-rv32i-str) : \
		RV32I.vhd \
		$(UNIT-work-decode_stage) \
		$(UNIT-work-execute_stage) \
		$(UNIT-work-fetch_stage) \
		$(UNIT-work-mem_stage) \
		$(UNIT-work-rv32i_control) \
		$(UNIT-work-wb_stage)
	$(COMPILE) $(OPTIONS) RV32I.vhd

$(UNIT-work-rv32i_control) \
$(UNIT-work-rv32i_control-str) : \
		RV32I_control.vhd \
		$(UNIT-work-decode_stage_control) \
		$(UNIT-work-execute_stage_control) \
		$(UNIT-work-mem_stage_control)
	$(COMPILE) $(OPTIONS) RV32I_control.vhd

$(UNIT-work-unary_and) \
$(UNIT-work-unary_and-str) : \
		unary_AND.vhd
	$(COMPILE) $(OPTIONS) unary_AND.vhd

$(UNIT-work-wb_stage) \
$(UNIT-work-wb_stage-str) : \
		wb_stage.vhd \
		$(UNIT-work-mux_4to1)
	$(COMPILE) $(OPTIONS) wb_stage.vhd


### Makefile ends here
